# Local secrets file - DO NOT COMMIT actual .env files
# Copy this to .env.local and fill in your values
#
# ============================================================
# GitHub Actions Setup (OIDC + Environments)
# ============================================================
#
# STEP 1: Create OIDC Identity Provider in AWS IAM
#   Go to: IAM > Identity providers > Add provider
#   - Provider type: OpenID Connect
#   - Provider URL: https://token.actions.githubusercontent.com
#   - Audience: sts.amazonaws.com
#   - Click "Add provider"
#
# STEP 2: Create IAM Role for GitHub Actions
#   Go to: IAM > Roles > Create role
#   - Trusted entity type: Web identity
#   - Identity provider: token.actions.githubusercontent.com
#   - Audience: sts.amazonaws.com
#   - Click Next, attach policies (e.g., PowerUserAccess or custom)
#   - Name: github-actions-deploy-role (or similar)
#   - Create the role
#
#   Then edit the role's Trust Policy (Role > Trust relationships > Edit):
#   {
#     "Version": "2012-10-17",
#     "Statement": [{
#       "Effect": "Allow",
#       "Principal": {
#         "Federated": "arn:aws:iam::YOUR_ACCOUNT_ID:oidc-provider/token.actions.githubusercontent.com"
#       },
#       "Action": "sts:AssumeRoleWithWebIdentity",
#       "Condition": {
#         "StringEquals": {
#           "token.actions.githubusercontent.com:aud": "sts.amazonaws.com"
#         },
#         "StringLike": {
#           "token.actions.githubusercontent.com:sub": "repo:YOUR_ORG/YOUR_REPO:*"
#         }
#       }
#     }]
#   }
#
#   Replace:
#   - YOUR_ACCOUNT_ID with your AWS account ID (e.g., 123456789012)
#   - YOUR_ORG/YOUR_REPO with your GitHub org/repo (e.g., acme/my-app)
#
#   Optional: Restrict to specific environments or branches:
#   - "repo:org/repo:environment:prod" (only prod environment)
#   - "repo:org/repo:ref:refs/heads/main" (only main branch)
#
# STEP 3: Create GitHub Environments (Settings > Environments)
#   Create two environments: "default" and "prod"
#
# STEP 4: Add 2 secrets to EACH environment:
#
#   AWS_ROLE_ARN = arn:aws:iam::123456789012:role/github-actions-deploy-role
#
#   CONFIG = {"DATABASE_URL":"postgresql://...","LAMBDA_SECURITY_GROUP_ID":"sg-xxx","SUBNET_IDS":"subnet-xxx,subnet-yyy"}
#
# ============================================================
# Local Development
# ============================================================

# Database connection string
DATABASE_URL=postgresql://user:pass@host:5432/db

# VPC Configuration for Lambda
LAMBDA_SECURITY_GROUP_ID=sg-xxxxx
SUBNET_IDS=subnet-xxxxx,subnet-yyyyy

# Embedding API Configuration
# EMBEDDING_PROVIDER=openrouter
# EMBEDDING_MODEL=google/gemini-embedding-001
# EMBEDDING_BASE_URL=https://gateway.ai.cloudflare.com/v1/YOUR_ACCOUNT/YOUR_GATEWAY/openrouter
EMBEDDING_API_KEY=sk-or-v1-xxxxx

# Completion/Chat API Configuration (for RAG synthesis)
# If not set, falls back to EMBEDDING_API_KEY
# LLM_PROVIDER=openrouter
# LLM_MODEL=google/gemini-3-flash-preview
LLM_API_KEY=sk-or-v1-xxxxx
# LLM_BASE_URL=  # Optional, auto-detected from provider

# Object Storage Configuration
OBJECT_STORAGE_TYPE=s3  # or 'fs' for local filesystem
BUCKET_NAME=your-bucket-name
S3_ENDPOINT_URL=https://your-s3-endpoint.com  # Optional for S3-compatible services
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=auto
